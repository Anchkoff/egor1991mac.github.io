module.exports=function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=require("fs")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",function(){return AsyncStylesheetWebpackPlugin});var fs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),fs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);class AsyncStylesheetWebpackPlugin{constructor(e={}){this.options={preloadPolyfill:!1,noscriptFallback:!0},Object.assign(this.options,e)}apply(e){void 0==e.hooks?e.plugin("compilation",e=>{e.plugin("html-webpack-plugin-alter-asset-tags",(e,t)=>{t(null,this.makeStylesheetsAsync(e))})}):e.hooks.compilation.tap("AsyncStylesheetWebpackPlugin",e=>{e.hooks.htmlWebpackPluginAlterAssetTags.tap("AsyncStylesheetWebpackPlugin",e=>this.makeStylesheetsAsync(e))})}makeStylesheetsAsync(data){let noscriptTags=[];for(let e of data.head)if("link"===e.tagName&&"stylesheet"===e.attributes.rel){let t=this.getChunk(data.chunks,e);if(null==t)continue;if(this.options.chunks&&-1==this.options.chunks.indexOf(t))continue;if(this.options.excludeChunks&&this.options.excludeChunks.indexOf(t)>-1)continue;let n=Object.keys(e.attributes).map(t=>t+'="'+e.attributes[t]+'"').join(" ");noscriptTags.push("<link "+n+">"),e.attributes.rel="preload",e.attributes.as="style",e.attributes.onload=e.attributes.onload?e.attributes.onload:"",e.attributes.onload+="this.onload=null;this.rel='stylesheet';"}if(noscriptTags.length>0&&(this.options.noscriptFallback&&data.head.push({tagName:"noscript",closeTag:!0,innerHTML:noscriptTags.join("")}),this.options.preloadPolyfill)){const cssrelpreloadPath=eval("require.resolve('fg-loadcss/dist/cssrelpreload.min.js')");data.head=[{tagName:"script",attributes:{type:"text/javascript"},closeTag:!0,innerHTML:fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(cssrelpreloadPath,"utf8")}].concat(data.head)}return data}getChunk(e,t){for(let n of e)for(let e of n.files)if(t.attributes&&t.attributes.href&&t.attributes.href.endsWith(e))return n.id;return null}}}]).default;
//# sourceMappingURL=plugin.js.map